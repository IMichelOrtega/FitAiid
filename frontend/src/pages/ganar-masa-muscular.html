<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Plan Mensual - Ganar Masa Muscular | FitAiid</title>
  <style>
    :root{
      --bg:#0f0f0f;
      --card:#0f0f10;
      --accent:#ff5a00;
      --muted:#bfbfbf;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: radial-gradient(1200px 400px at 20% 10%, rgba(255,90,0,0.06), transparent), var(--bg);
      color:#fff; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      padding-bottom:60px;
    }

    .topbar{
      background:#0d0d0d;
      padding:18px 28px;
      display:flex;
      align-items:center;
      gap:16px;
      box-shadow:0 3px 10px rgba(0,0,0,0.6);
    }
    .topbar img{width:48px;}
    .topbar h2{margin:0;color:var(--accent);font-size:18px}

    .wrap{max-width:980px;margin:28px auto;padding:20px;}

    .hero{
      display:flex;
      gap:20px;
      align-items:center;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:22px;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,0.6);
    }
    .hero .hero-img{
      width:170px;height:110px;border-radius:10px;overflow:hidden;flex:0 0 170px;
      border:4px solid rgba(255,90,0,0.06);
    }
    .hero .hero-img img{width:100%;height:100%;object-fit:cover;display:block}
    .hero .hero-body h1{margin:0;color:var(--accent);font-size:20px}
    .hero .hero-body p{color:var(--muted);margin:6px 0 0 0}

    .controls{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}
    .btn{
      background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:#fff;
      cursor:pointer;font-size:14px;
    }
    .btn.primary{background:var(--accent);color:#0f0f0f;border:0}

    .weeks{margin-top:18px;display:flex;flex-direction:column;gap:12px}
    .week{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));
      border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03);
      overflow:hidden;
    }
    .week .head{
      display:flex;justify-content:space-between;align-items:center;cursor:pointer;
    }
    .week .head h3{margin:0;color:var(--accent);font-size:16px}
    .week .content{margin-top:10px;color:#eaeaea;display:none;line-height:1.45}

    .day-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:10px}
    .day{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);
    }
    .day h4{margin:0 0 6px 0;font-size:14px;color:#fff}
    .day p{margin:0;font-size:13px;color:var(--muted)}

    .shop{margin-top:18px;padding:14px;background:#0b0b0b;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
    .shop pre{white-space:pre-wrap;color:#eaeaea;margin:0;font-size:14px}

    .tips{margin-top:16px;color:var(--muted);font-size:14px}

    @media (max-width:820px){
      .day-grid{grid-template-columns:1fr}
      .hero{flex-direction:column;align-items:flex-start}
    }
    /* === BOT√ìN SUPERIOR ALINEADO A LA IZQUIERDA === */
.btn-back-top {
  display: inline-block;
  margin: 10px 0 20px 0;
  padding: 8px 14px;
  font-size: 14px;
  font-weight: 600;
  color: var(--accent);
  background: var(--glass);
  border: 1px solid rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(6px);
  border-radius: 8px;
  text-decoration: none;
  transition: 0.25s ease;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.25);
}

.btn-back-top:hover {
  background: rgba(255, 90, 0, 0.12);
  color: #fff;
  border-color: rgba(255, 90, 0, 0.4);
  box-shadow: 0 0 12px rgba(255, 90, 0, 0.35);
  transform: translateX(-3px);
}
  </style>
</head>
<body>

  <div class="topbar">
    <img src="img_nutricion/logo.png">
    <h2>Plan Mensual ‚Äî Ganar Masa Muscular</h2>
  </div>

  <main class="wrap">
    <!-- BOT√ìN DE VOLVER -->
  <a href="nutricion.html" class="btn-back-top">‚Üê Volver</a>
    <section class="hero">
      <div class="hero-img">
        <img src="../img/nutricion/nutricioÃÅn (1).webp" alt="hero">
      </div>
      <div class="hero-body">
        <h1>Plan Mensual (Apto para todos)</h1>
        <p>Un plan dise√±ado para construir masa muscular con una alimentaci√≥n rica en prote√≠nas, carbohidratos estrat√©gicos y h√°bitos saludables sostenibles.</p>

        <div class="controls">
          <button class="btn primary" id="printBtn">Imprimir Plan</button>
          <button class="btn" id="downloadShop">Descargar Lista de Compras</button>
          
        </div>
      </div>
    </section>

    <section class="weeks" id="weeks">

      <!-- Semana 1 -->
      <div class="week">
        <div class="head" data-toggle>
          <h3>Semana 1 ‚Äî Activaci√≥n muscular</h3>
          <span class="chev">+</span>
        </div>
        <div class="content">
          <p style="color:var(--muted)">Objetivo: aumentar prote√≠na diaria y regular horarios.</p>

          <div class="day-grid">
            <div class="day"><h4>Desayuno</h4><p>Avena (60 g) + leche (200 ml) + prote√≠na + fresas.</p></div>
            <div class="day"><h4>Media ma√±ana</h4><p>Yogur griego + almendras (15 g).</p></div>
            <div class="day"><h4>Almuerzo</h4><p>Pollo (180 g) + arroz (120 g) + ensalada.</p></div>
            <div class="day"><h4>Merienda</h4><p>Batido de prote√≠na + fruta.</p></div>
            <div class="day"><h4>Cena</h4><p>Carne magra (180 g) + batata (150 g).</p></div>
            <div class="day"><h4>Snack nocturno</h4><p>Queso cottage (100 g).</p></div>
          </div>
        </div>
      </div>

      <!-- Semana 2 -->
      <div class="week">
        <div class="head" data-toggle>
          <h3>Semana 2 ‚Äî M√°s energ√≠a</h3>
          <span class="chev">+</span>
        </div>
        <div class="content">
          <p style="color:var(--muted)">Objetivo: subir carbohidratos complejos para mejorar rendimiento.</p>

          <div class="day-grid">
            <div class="day"><h4>Desayuno</h4><p>Huevos (3) + pan integral (2) + fruta.</p></div>
            <div class="day"><h4>Media ma√±ana</h4><p>Prote√≠na + avena (40 g).</p></div>
            <div class="day"><h4>Almuerzo</h4><p>Pasta integral (180 g) + pollo (150 g).</p></div>
            <div class="day"><h4>Merienda</h4><p>Sandwich integral con aguacate.</p></div>
            <div class="day"><h4>Cena</h4><p>Salm√≥n (180 g) + quinoa (120 g).</p></div>
            <div class="day"><h4>Snack</h4><p>Yogur + miel.</p></div>
          </div>
        </div>
      </div>

      <!-- Semana 3 -->
      <div class="week">
        <div class="head" data-toggle>
          <h3>Semana 3 ‚Äî Prioridad prote√≠na</h3>
          <span class="chev">+</span>
        </div>
        <div class="content">
          <p style="color:var(--muted)">Objetivo: reforzar construcci√≥n muscular.</p>

          <div class="day-grid">
            <div class="day"><h4>Desayuno</h4><p>Smothie: prote√≠na + avena + frutos rojos.</p></div>
            <div class="day"><h4>Media ma√±ana</h4><p>Huevo + frutos secos.</p></div>
            <div class="day"><h4>Almuerzo</h4><p>Carne magra (200 g) + arroz (150 g).</p></div>
            <div class="day"><h4>Merienda</h4><p>Queso cottage + fruta.</p></div>
            <div class="day"><h4>Cena</h4><p>Pollo (180 g) + pasta integral.</p></div>
            <div class="day"><h4>Snack</h4><p>Case√≠na nocturna.</p></div>
          </div>
        </div>
      </div>

      <!-- Semana 4 -->
      <div class="week">
        <div class="head" data-toggle>
          <h3>Semana 4 ‚Äî Optimizaci√≥n final</h3>
          <span class="chev">+</span>
        </div>
        <div class="content">
          <p style="color:var(--muted)">Objetivo: aumentar calor√≠as limpias y estabilizar progreso.</p>

          <div class="day-grid">
            <div class="day"><h4>Desayuno</h4><p>Pancakes de avena + prote√≠na + miel.</p></div>
            <div class="day"><h4>Media ma√±ana</h4><p>Aguacate + pan integral.</p></div>
            <div class="day"><h4>Almuerzo</h4><p>Pavo (200 g) + pur√© de batata.</p></div>
            <div class="day"><h4>Merienda</h4><p>Batido + banana.</p></div>
            <div class="day"><h4>Cena</h4><p>Salm√≥n (200 g) + pasta (150 g).</p></div>
            <div class="day"><h4>Snack</h4><p>Yogur griego + granola.</p></div>
          </div>
        </div>
      </div>

    </section>

    <section class="shop" id="shopList">
      <h3 style="color:var(--accent);margin:0 0 8px 0">Lista de compras (base semanal)</h3>
      <pre>
Prote√≠nas:
 - Pollo
 - Carne magra
 - Pavo
 - Salm√≥n
 - Huevos
 - Prote√≠na en polvo
 - Queso cottage

Carbohidratos:
 - Avena
 - Pan integral
 - Arroz
 - Quinoa
 - Batata
 - Pasta integral

Frutas y verduras:
 - Bananas, fresas, manzana
 - Br√≥coli, espinaca, zanahoria

Grasas saludables:
 - Aguacate
 - Almendras y nueces
 - Aceite de oliva

Otros:
 - Miel
 - Especias
 - Yogur griego
      </pre>
    </section>

    <div class="tips">
      <p><strong>Consejo:</strong> Consume 2 g de prote√≠na/kg, descansa 7‚Äì9 h, entrena fuerza 3‚Äì5 veces/semana y aumenta calor√≠as progresivamente.</p>
    </div>
  </main>
  <!-- üîí Protecci√≥n de autenticaci√≥n -->
  <script src="../scripts/auth-guard.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- SCRIPTS NECESARIOS (YA FUNCIONAN) -->
  <script>
    // Acorde√≥n para las semanas
    document.querySelectorAll('.week .head').forEach(head => {
      head.addEventListener('click', () => {
        const content = head.nextElementSibling;
        const chev = head.querySelector('.chev');
        const open = content.style.display === 'block';
        // cerrar todos
        document.querySelectorAll('.week .content').forEach(c=>c.style.display='none');
        document.querySelectorAll('.week .chev').forEach(ch=>ch.textContent='+');
        if(!open){
          content.style.display = 'block';
          chev.textContent = '‚àí';
          // smooth scroll to content
          content.scrollIntoView({behavior:'smooth', block:'center'});
        } else {
          content.style.display = 'none';
        }
      });
    });

    // Bot√≥n imprimir
    document.getElementById("printBtn").onclick = () => window.print();

    
  // Descargar PLAN NUTRICIONAL COMPLETO (4 semanas)
document.getElementById('downloadShop').addEventListener('click', async () => {

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({ unit: "mm", format: "a4" });

  // ===== T√çTULO =====
  doc.setFont("Helvetica", "bold");
  doc.setFontSize(22);
  doc.setTextColor(255, 90, 0);
  doc.text("Plan Nutricional ‚Ä¢ Gana masa muscular ‚Ä¢ FitAiid", 15, 20);

  // ===== L√çNEA =====
  doc.setDrawColor(255, 90, 0);
  doc.setLineWidth(2);
  doc.line(15, 25, 195, 25);

  // ===== LOGO =====
  const logoUrl = "/mnt/data/logo.png";

  try {
    const res = await fetch(logoUrl);
    if (res.ok) {
      const blob = await res.blob();
      const reader = new FileReader();
      await new Promise((resolve) => {
        reader.onloadend = resolve;
        reader.readAsDataURL(blob);
      });
      doc.addImage(reader.result, "PNG", 150, 8, 40, 40);
    }
  } catch (e) {
    console.warn("No se carg√≥ el logo");
  }

  // ===== EXTRAER TODO EL PLAN =====
  const semanas = document.querySelectorAll(".week");
  let textoCompleto = "";

  semanas.forEach((week, i) => {

    const titulo = week.querySelector("h3").innerText.trim();
    const objetivo = week.querySelector(".content p")?.innerText.trim() || "";

    textoCompleto += `${titulo}\n${objetivo}\n\n`;

    const bloques = week.querySelectorAll(".day");

    bloques.forEach(b => {
      const comida = b.querySelector("h4").innerText.trim();
      const detalle = b.querySelector("p").innerText.trim();
      textoCompleto += `‚Ä¢ ${comida}: ${detalle}\n`;
    });

    textoCompleto += `\n\n`;
  });

  // ===== TEXTO PDF =====
  doc.setFont("Helvetica", "normal");
  doc.setFontSize(12);
  doc.setTextColor(40, 40, 40);

  const lineas = doc.splitTextToSize(textoCompleto, 180);
  doc.text(lineas, 15, 50);

  // ===== GUARDAR =====
  doc.save("plan_gana masa muscular_fitaiid.pdf");
});

  </script>

</body>
</html>